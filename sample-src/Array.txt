data Array(a) of NewArray(Int, a);
data Bool() of True() | False();
data Maybe(a) of Just(a) | Nothing();
data Unit() of MkUnit();

and(x, y) = case x
  { True() => y
  | False() => False()
  };

set(array : Array(a), idx : Int, x : a) = MkUnit();
get(array : Array(a), idx : Int) : Maybe(a) = case array 
  { NewArray(size, defaultVal) => case and(idx < size, 0 <= idx)
    { True() => Just(defaultVal)
    | False() => Nothing()
    }
  };
